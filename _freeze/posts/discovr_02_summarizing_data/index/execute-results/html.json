{
  "hash": "9c28ba00c6b295a6abc64294a2b33f45",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"discovr_02 - Summarizing Data\"\nauthor: \"Colin Madland\"\ndate: \"2024-04-18\"\ncategories: [frequency, histograms, variance, standard deviation, IQR, R, discovr]\neditor: visual\nimage: \"raft-falls.jpeg\"\nfreeze: auto\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nice_tib <- here::here(\"data/ice_bucket.csv\") |> readr::read_csv()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 2323000 Columns: 1\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (1): upload_day\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n## Frequency tables\n\n-   use `group_by()` and `summarise()` and `n()` functions from `dplyr`\n\n`group_by()`\n\n:   groups data by whatever variable(s) you name within the function\n\n`summarise()`\n\n:   creates summary table based on the variables in the function\n\n`n()`\n\n:   counts the number of scores\n\nTo count frequencies:\n\n-   tell R to treat values that are the same, as being in the same category\n    -   `group_by(upload_day)` tells R that scores that are the same within `upload_day` are in the same group\n    -   subsequent operations are conducted on the groups\n-   count how many scores fall into each category\n    -   `summarize()` creates a variable called `frequency` that counts how many items are in each group created by `group_by()`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfreq_tbl <- ice_tib |>\n  dplyr::group_by(upload_day) |> \n  dplyr::summarise(\n    frequency = n()\n  )\nfreq_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 56 × 2\n   upload_day frequency\n        <dbl>     <int>\n 1         21      2000\n 2         22      2000\n 3         23      4000\n 4         24      4000\n 5         25      8000\n 6         26      8000\n 7         27     10000\n 8         28     16000\n 9         29     20000\n10         30     29000\n# ℹ 46 more rows\n```\n\n\n:::\n:::\n\n\n\n-   this is a large table and a bit unwieldy\n-   use a `grouped frequency distribution`\n    -   place values of `upload_days` into bins\n-   if we want to split the variable `upload_day` into bins of 4 days...\n\n```         \nggplot2::cut_width(upload_day, 4)\n```\n\n-   combine this with `dplyr::mutate()` to create a new variable called `days_group`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngp_freq_dist <- ice_tib |> \n  dplyr::mutate(\n    days_group = ggplot2::cut_width(upload_day, 4)\n    )\ngp_freq_dist\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2,323,000 × 2\n   upload_day days_group\n        <dbl> <fct>     \n 1         34 (30,34]   \n 2         36 (34,38]   \n 3         31 (30,34]   \n 4         30 (26,30]   \n 5         33 (30,34]   \n 6         38 (34,38]   \n 7         36 (34,38]   \n 8         46 (42,46]   \n 9         45 (42,46]   \n10         31 (30,34]   \n# ℹ 2,322,990 more rows\n```\n\n\n:::\n:::\n\n\n\n-   this creates a new object called `gp_freq_dist` that contains each value within `ice_tib` but with an extra column/variable called `days_group` that indicates the bin the value of `upload_day` is in\n\n::: callout-note\n## Set notation\n\n-   the value of `upload_day` now has a corresponding value of `days_group` containing the bin\n-   the first score of 34 has been assigned to the bin labelled \\`(30, 34\\] which is the bin containing any score above 30, up to and including 34\n-   the label uses standard mathematical notation for sets where `(` or `)` means 'not including' and `[` or `]` means 'including'\n:::\n\n-   now we can use `summarize()` and `n()` to count scores like before, except to use `days_group` instead of `upload_day`\n\n### Coding challenge\n\nCreate a grouped frequency table called gp_freq_dist by starting with the code in the code example and then using the code we used to create freq_tbl to create a pipe that summarizes the grouped scores.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngp_freq_dist <- ice_tib |> \n  dplyr::mutate(\n    days_group = ggplot2::cut_width(upload_day, 4)\n    ) |>\n  dplyr::group_by(days_group) |> \n  dplyr::summarise(\n    frequency = n()\n  )\ngp_freq_dist\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 15 × 2\n   days_group frequency\n   <fct>          <int>\n 1 [18,22]         4000\n 2 (22,26]        24000\n 3 (26,30]        75000\n 4 (30,34]       367000\n 5 (34,38]       770000\n 6 (38,42]       534000\n 7 (42,46]       255000\n 8 (46,50]       102000\n 9 (50,54]        70000\n10 (54,58]        38000\n11 (58,62]        26000\n12 (62,66]        18000\n13 (66,70]        18000\n14 (70,74]        16000\n15 (74,78]         6000\n```\n\n\n:::\n:::\n\n\n\n## Relative Frequencies\n\n-   we have an object `gp_freq_dist` that contains the number of days grouped into bins of 4 days and the number of videos uploaded during each of the time periods represented by those bins\n-   to calculate the relative frequency we can use `dplyr::mutate()` to add a variable that divides the frequency by the total number of videos using `sum()`\n\n```         \n... |>\n    dplyr::mutate(\n        relative_freq = frequency/sum(frequency) # creates a new column\n    )\n```\n\n## Efficient Code\n\n-   rather than creating the table of relative frequencies step-by-step, it is usually more efficient to carry out the steps in one piece of code\n-   \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngp_freq_dist <- ice_tib |> \n  dplyr::mutate(\n    days_group = ggplot2::cut_width(upload_day, 4)\n    ) |> \n  dplyr::group_by(days_group) |> \n  dplyr::summarise(\n    frequency = n()\n  ) |> \n  dplyr::mutate(\n    relative_freq = frequency/sum(frequency),\n    percent = relative_freq*100\n  )\n  \ngp_freq_dist\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 15 × 4\n   days_group frequency relative_freq percent\n   <fct>          <int>         <dbl>   <dbl>\n 1 [18,22]         4000       0.00172   0.172\n 2 (22,26]        24000       0.0103    1.03 \n 3 (26,30]        75000       0.0323    3.23 \n 4 (30,34]       367000       0.158    15.8  \n 5 (34,38]       770000       0.331    33.1  \n 6 (38,42]       534000       0.230    23.0  \n 7 (42,46]       255000       0.110    11.0  \n 8 (46,50]       102000       0.0439    4.39 \n 9 (50,54]        70000       0.0301    3.01 \n10 (54,58]        38000       0.0164    1.64 \n11 (58,62]        26000       0.0112    1.12 \n12 (62,66]        18000       0.00775   0.775\n13 (66,70]        18000       0.00775   0.775\n14 (70,74]        16000       0.00689   0.689\n15 (74,78]         6000       0.00258   0.258\n```\n\n\n:::\n:::\n\n\n\n## Histograms\n\n-   `ggplot2` can produce data visualizations\n\n::: callout-tip\n## Tip: Always load `ggplot2`!\n\nWe’ve discussed elsewhere that if you include packages when you use functions (e.g., `dplyr::mutate()`) you don’t need to explicitly load the package (in this case `dplyr`). However, to create plots with `ggplot2` you build them up layer by layer, which means you use a lot of `ggplot2` functions. For this reason, I advise loading it at the start of your Quarto document and not worrying too much about including package references when you use functions. You can load it either with `library(ggplot2)` or by loading the entire tidyverse using `library(tidyverse)`.\n:::\n\n-   general form of `ggplot2`\n\n```         \n`ggplot2::ggplot(my_tib, aes(variable_for_x_axis, variable_for_y_axis))`\n```\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot2::ggplot(ice_tib, aes(upload_day))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n-   something is missing b/c we only told `ggplot2` 'what' to plot, not 'how' to plot it.\n-   need to add a `geom` with `geom_histogram()`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot2::ggplot(ice_tib, aes(upload_day)) +\ngeom_histogram()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n### Changing bin widths\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot2::ggplot(ice_tib, aes(upload_day)) +\ngeom_histogram(binwidth=1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n### Changing colours\n\n-   include `fill =` within the `geom_histogram()` function\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot2::ggplot(ice_tib, aes(upload_day)) +\ngeom_histogram(binwidth = 1, fill = \"#440154\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n### Transparency and axis labels\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot2::ggplot(ice_tib, aes(upload_day)) +\ngeom_histogram(binwidth = 1, fill = \"#440154\", alpha = 0.25) +\nlabs(y = \"Frequency\", x = \"Days since first ice bucket challenge video\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n### Themes\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot2::ggplot(ice_tib, aes(upload_day)) +\ngeom_histogram(binwidth = 1, fill = \"#440154\", alpha = 0.9) +\nlabs(y = \"Frequency\", x = \"Days since first ice bucket challenge video\") +\ntheme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n## Summarizing data\n\n### Mean and median\n\n```         \nmean(variable, trim = 0, na.rm = FALSE)\n```\n\n`trim`\n\n:   allows you to trim scores before calculating the mean by specifying a value between 0 and 0.5. default is 0 (no trim). to trim 10% of scores fom each end of the distribution you could set `trim = 0.1`\n\n`na.rm`\n\n:   stands for `NA remove`. Missing values are denoted `NA`, for 'not available'. by setting `na.rm = TRUE` (or `na.rm = T`), R will remove missing values before computing the mean\n\n::: callout-tip\n## Missing Values\n\nThe default in many functions is not to remove missing values (e.g. `na.rm = FALSE`). If you have missing values in your data and don’t change this default behaviour R will throw an error. Therefore, if you get an error from a function like `mean()`, check whether you have missing values and whether you have forgotten to set `na.rm = TRUE`.\n:::\n\nThe function for median is similar, except no trim (median is effectively the mean with 50% trim)\n\n```         \nmedian(variable, na.rm = FALSE)\n```\n\n### Code example\n\n-   if the defaults are ok, there is no need to set those arguments\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(ice_tib$upload_day)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 39.678\n```\n\n\n:::\n:::\n\n\n\nTo remove missing values:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(ice_tib$upload_day , na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 39.678\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n?mean\n```\n:::\n\n\n\n### coding challenge\n\nFind the median number of days after the original ice bucket video that other videos were uploaded.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmedian(ice_tib$upload_day)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 38\n```\n\n\n:::\n:::\n\n\n\n## Quantifying the 'fit' of the mean\n\n`var()`\n\n:   variance\n\n:   `var(variable_name, na.rm = FALSE)`\n\n`sd()`\n\n:   standard deviation\n\n:   `sd(variable_name, na.rm = FALSE)`\n\n`var()` and `sd()` take the same syntax as `mean()`\n\n### coding challenge\n\nUse what you learned in the previous section and the code example above to get the variance and standard deviation of the days since the original ice bucket video that other videos were uploaded.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvar(ice_tib$upload_day)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 59.94197\n```\n\n\n:::\n\n```{.r .cell-code}\nsd(ice_tib$upload_day)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 7.74222\n```\n\n\n:::\n:::\n\n\n\n## Inter-quartile range\n\n`IQR()`\n\n:   `IQR(variable_name, na.rm = FALSE, type = 7)`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nIQR(ice_tib$upload_day, type = 7)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 7\n```\n\n\n:::\n\n```{.r .cell-code}\nIQR(ice_tib$upload_day, type = 8)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 7\n```\n\n\n:::\n:::\n\n\n\n## Creating a summary table\n\n-   used to comine all the above into one table\n\n`summarise()`\n\n```         \nice_tib |>\n  dplyr::summarise(\n    median =  median(upload_day),  # creates new variable called `median` from the output of `median(upload_day)`\n    mean =  mean(upload_day), # creates new variable called `mean` from the output of `mean(upload_day)`\n    ...\n    )\n```\n\n### coding challenge\n\nCreate a summary table containing the mean, median, IQR, variance and SD of the number of days since the original ice bucket video.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nice_tib |>\n  dplyr::summarise(\n    median =  median(upload_day),  # creates new variable called `median` from the output of `median(upload_day)`\n    mean =  mean(upload_day), # creates new variable called `mean` from the output of `mean(upload_day)`\n    IQR = IQR(upload_day),\n    var = var(upload_day),\n    sd = sd(upload_day)\n    )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 5\n  median  mean   IQR   var    sd\n   <dbl> <dbl> <dbl> <dbl> <dbl>\n1     38  39.7     7  59.9  7.74\n```\n\n\n:::\n:::\n\n\n\n### Code example\n\nTo store the summary of stats, we assign it to a new object:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nupload_summary <- ice_tib |>\n  dplyr::summarise(\n    median =  median(upload_day),\n    mean =  mean(upload_day),\n    IQR = IQR(upload_day),\n    variance = var(upload_day),\n    std_dev = sd(upload_day)\n    ) \n    upload_summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 5\n  median  mean   IQR variance std_dev\n   <dbl> <dbl> <dbl>    <dbl>   <dbl>\n1     38  39.7     7     59.9    7.74\n```\n\n\n:::\n:::\n\n\n\n## Rounding Values\n\nuse `round()` function to round values and use `kable()` from `knitr` to round an entire table of values\n\n`round()`\n\n:   round(x, digits = 0)\n\n:   default is 0\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nround(3.211420)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n:::\n\n\n\nalso use a pipe to feed a mean, median, or variance into the round function\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvar(ice_tib$upload_day) |>\n  round(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 59.942\n```\n\n\n:::\n\n```{.r .cell-code}\nmean(ice_tib$upload_day) |>\n  round(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 39.678\n```\n\n\n:::\n\n```{.r .cell-code}\nsd(ice_tib$upload_day) |>\n  round(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 7.742\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nupload_summary <- ice_tib |>\n  dplyr::summarise(\n    median =  median(upload_day),\n    mean =  mean(upload_day),\n    IQR = IQR(upload_day),\n    variance = var(upload_day),\n    std_dev = sd(upload_day)\n    ) \n    upload_summary |>\n    round(2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 5\n  median  mean   IQR variance std_dev\n   <dbl> <dbl> <dbl>    <dbl>   <dbl>\n1     38  39.7     7     59.9    7.74\n```\n\n\n:::\n:::\n\n\n\n## Datawizard\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatawizard::describe_distribution(x = ice_tib,\n  select = NULL,\n  exclude = NULL,\n  centrality = \"mean\",\n  dispersion = TRUE,\n  iqr = TRUE,\n  range = TRUE,\n  quartiles = FALSE,\n  include_factors = FALSE,\n  ci = NULL)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nVariable   |  Mean |   SD | IQR |          Range | Skewness | Kurtosis |       n | n_Missing\n--------------------------------------------------------------------------------------------\nupload_day | 39.68 | 7.74 |   7 | [21.00, 76.00] |     1.72 |     4.43 | 2323000 |         0\n```\n\n\n:::\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}